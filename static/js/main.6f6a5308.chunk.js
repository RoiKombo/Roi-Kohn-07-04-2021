(this.webpackJsonpweatherapp=this.webpackJsonpweatherapp||[]).push([[0],{70:function(e,t,n){"use strict";n.r(t);var c,o,a,i=n(0),r=n.n(i),s=n(10),u=n.n(s),l=n(18),d=n(13),f=n(5),j=n(6),b=n(7),p=n(21),h=n(1),O=b.a.div(c||(c=Object(j.a)(["\n    width: 100vw;\n    display:flex;\n    justify-content: space-between;\n    background-color: #553074;\n"]))),v=(b.a.button(o||(o=Object(j.a)(["\n    display:flex;\n    justify-content: flex-end;\n"]))),b.a.div(a||(a=Object(j.a)(["\n    display:flex;\n    justify-content: flex-start;\n    color: white;\n"]))));function g(){return Object(h.jsxs)(O,{children:[Object(h.jsx)(v,{children:"HEROLO weather task"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(l.b,{to:"/",children:Object(h.jsx)(p.Button,{label:"HOME",icon:"pi pi-home"})}),Object(h.jsx)(l.b,{to:"/favorites",children:Object(h.jsx)(p.Button,{label:"FAVORITES",icon:"pi pi-star-o"})})]})]})}var y,x,m,C=n(31),w=n(14),N=n(43),k=n(12),T="SUGGESTIONS",E="GET_WEATHER",S="CURRENT_CONDITIONS",A="FAVORITES_CONDITIONS",I="jXiwGd5fgeVXVG8lKaClg4D6GlAGEz8q",W=function(e){return function(t){console.log("getWeather",e),fetch("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(e,"?apikey=").concat(I,"&metric=true")).then((function(e){return e.json()})).then((function(e){return t({type:E,payload:e})})).catch((function(e){return console.log("faild to get 5 day foreCast")}))}},F=function(e,t){return function(n){console.log("getcurrent",e,t),fetch("https://dataservice.accuweather.com/currentconditions/v1/".concat(e,"?apikey=").concat(I)).then((function(e){return e.json()})).then((function(c){var o=c[0];n({type:S,payload:Object(k.a)(Object(k.a)({},o),{},{cityName:t,key:e})})})).catch((function(e){return console.log("faild to get current conditions")}))}},M=b.a.div(y||(y=Object(j.a)(["\n    display: flex;\n    justify-content: center;\n"]))),D=Object(d.b)((function(e){return{data:e.data}}),{getAutoComplete:function(e){return function(t){console.log("getAutoComplete",e),fetch("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(I,"&q=").concat(e)).then((function(e){return e.json()})).then((function(e){return t({type:T,payload:e})})).catch((function(e){return console.log("faild to get autoComplete API")}))}},getWeather:W,getCurrentConditions:F})((function(e){var t=e.data,n=e.getAutoComplete,c=e.getWeather,o=e.getCurrentConditions,a=Object(i.useState)(),r=Object(w.a)(a,2),s=r[0],u=r[1],l=t.suggestions,d=void 0===l?[]:l;Object(i.useEffect)((function(){console.log("inputCity",s);var e=d.filter((function(e){return e.LocalizedName===s.value}));console.log("checkCityName",e),e.length>0&&c(e[0].Key),e.length>0&&o(e[0].Key,e[0].LocalizedName)}),[s]);var f=d.map((function(e){return{label:e.LocalizedName,value:e.LocalizedName}}));return Object(h.jsx)(M,{children:Object(h.jsx)(N.AutoComplete,{value:s,suggestions:f,field:"value",onChange:function(e){return t=e.value,void(new RegExp(/(^$|^[a-zA-Z ]+$)/).test(t)?u(t):console.log("search accepts english letters only"));var t},completeMethod:function(){console.log("inputCity",s),void 0!==s&&n(s)},type:"a-z"})})})),R=n(44),V=n.n(R),z=b.a.div(x||(x=Object(j.a)(["\n    padding: 1.2rem;\n    background-color: #d5ecc2;\n    margin: 5px\n\n"]))),G=b.a.div(m||(m=Object(j.a)(["\n    display: flex;\n    justify-content: space-around;\n"]))),L=Object(d.b)((function(e){return{data:e.data}}))((function(e){var t,n,c=e.data;return console.log("DailyForecasts",c),Object(h.jsx)(G,{children:null===c||void 0===c||null===(t=c.weeklyForecast)||void 0===t||null===(n=t.DailyForecasts)||void 0===n?void 0:n.map((function(e,t){return Object(h.jsxs)(z,{children:[V()(e.Date).format("dddd"),Object(h.jsx)("p",{children:e.Day.IconPhrase}),Object(h.jsxs)("p",{children:[e.Temperature.Minimum.Value,"\xb0"]}),Object(h.jsxs)("p",{children:[e.Temperature.Maximum.Value,"\xb0"]})]},t)}))})}));var B,J,K,P,H,_,q,U,X,$=function(e,t){var n=Object(i.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return console.log(c),t}})),c=Object(w.a)(n,2),o=c[0],a=c[1];return[o,function(t){try{var n=t instanceof Function?t(o):t;a(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(c){console.log(c)}}]},Z=(b.a.div(B||(B=Object(j.a)(["\n    display: flex;\n    justify-content: center;\n    margin: 20px 0;\n"]))),b.a.div(J||(J=Object(j.a)(["   \n    display: flex;\n    flex-direction: column;\n    width: 80%;background: #ffffff;\n    color: #495057;\n    box-shadow:  3px 3px 17px #e1e1e3, -3px -3px 17px #ffffff;\n    border-radius: 15px;\n    margin: 0 0 30px 10px;\n    padding: 23px;\n    flex-grow: 1;\n    margin: auto;\n"])))),Q=(b.a.div(K||(K=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;   \n"]))),b.a.button(P||(P=Object(j.a)(["\n     display: flex;\n    justify-content: flex-end;\n"]))),b.a.img(H||(H=Object(j.a)(["\n    width: 100px;\n    height: 100px;\n"]))),b.a.div(_||(_=Object(j.a)(["\n    display: flex;\n    justify-content: flex-start;\n"]))),b.a.h1(q||(q=Object(j.a)(["\n    display: flex;\n    justify-content: center;\n"]))),Object(d.b)((function(e){return{data:e.data,currentCity:e.data.currentConditions.cityName}}),{getWeather:W,getCurrentConditions:F})((function(e){var t=e.data,n=e.getWeather,c=e.getCurrentConditions,o=e.currentCity;console.log("current",o);var a=$("favorites",[]),r=Object(w.a)(a,2),s=r[0],u=r[1],l=Object(i.useState)(!1),d=Object(w.a)(l,2),f=d[0],j=d[1];Object(i.useEffect)((function(){n(215854),c(215854,"Tel Aviv")}),[]);return Object(i.useEffect)((function(){(s.length>0?s.filter((function(e){if(e.cityName===o)return e})):[]).length>0?j(!0):j(!1)}),[o]),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsx)(D,{})}),Object(h.jsxs)(Z,{children:[t.currentConditions.WeatherText&&Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:t.currentConditions.cityName}),Object(h.jsx)("div",{children:t.currentConditions.WeatherText}),Object(h.jsxs)("div",{children:[t.currentConditions.Temperature.Metric.Value,"\xb0"]})]}),Object(h.jsx)(p.Button,{onClick:function(){return function(e){var t=e.cityName,n=e.key,c=s.length>0?s.filter((function(e){if(e.cityName===t)return e})):[];if(console.log("index",c,s,t,n),c.length>0){j(!1);var o=s.reduce((function(e,n){return n.cityName!==t?[].concat(Object(C.a)(e),[n]):e}),[]);u(o)}else{j(!0),console.log("set fav",t,n);var a=s.length>0?s:[];u([].concat(Object(C.a)(a),[{cityName:t,key:n}]))}}(t.currentConditions)},icon:"pi pi-star-o",className:f?"p-button-rounded p-button-secondary":"p-button-rounded p-button-secondary p-button-outlined"}),Object(h.jsx)(L,{})]})]})}))),Y=b.a.div(U||(U=Object(j.a)(["\n    \n    padding: 1.2rem;\n    background-color: #d5ecc2;\n    margin: 5px\n"]))),ee=b.a.div(X||(X=Object(j.a)(["\n    display: flex;\n    justify-content: center;\n"]))),te=Object(d.b)((function(e){return{favoritesConditions:e.data.favoritesConditions,currentCity:e.data.currentConditions.cityName}}),{getFavoritesConditions:function(e){return function(t){console.log("FavoritesConditions",e),Promise.all(e.map((function(e){return fetch("https://dataservice.accuweather.com/currentconditions/v1/".concat(e.cityKey,"?apikey=").concat(I))}))).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(e){t({type:A,payload:e})})).catch((function(e){return console.log("faild to get favorite conditions")}))}},getWeather:W,getCurrentConditions:F})((function(e){var t=e.getFavoritesConditions,n=e.favoritesConditions,c=e.getWeather,o=e.getCurrentConditions,a=$("favorites"),r=Object(w.a)(a,2),s=r[0];r[1];console.log("favorites",s);var u=Object(f.f)();Object(i.useEffect)((function(){t(s)}),[]);var l=function(e){var t=e.slice(31),n=t.indexOf("/");return t.slice(0,n).replace("-"," ")};console.log("convertCityName",l("http://m.accuweather.com/en/il/tel-aviv/215854/current-weather/215854?lang=en-us"));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"This are my favorites, there are many favorites but these ones are mine"}),Object(h.jsx)(ee,{children:n.map((function(e,t){return Object(h.jsxs)(Y,{onClick:function(){return function(e){var t=e.slice(63),n=t.indexOf("?"),a=t.slice(0,n);c(a),o(a,l(e)),u.push("/")}(e[0].MobileLink)},children:[Object(h.jsx)("div",{children:l(e[0].MobileLink)}),Object(h.jsx)("div",{children:e[0].WeatherText}),Object(h.jsxs)("div",{children:[e[0].Temperature.Metric.Value,"\xb0"]})]},t)}))})]})})),ne=n(15),ce=n(45),oe=n(46),ae={suggestions:[],weeklyForecast:{},currentConditions:{},favoritesConditions:[]},ie=Object(ne.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(k.a)(Object(k.a)({},e),{},{suggestions:t.payload});case E:return Object(k.a)(Object(k.a)({},e),{},{weeklyForecast:t.payload});case S:return Object(k.a)(Object(k.a)({},e),{},{currentConditions:t.payload});case A:return Object(k.a)(Object(k.a)({},e),{},{favoritesConditions:t.payload});default:return e}}}),re=[oe.a],se=Object(ne.createStore)(ie,{},Object(ce.composeWithDevTools)(ne.applyMiddleware.apply(void 0,re)));n(67),n(68),n(69);var ue=function(){return Object(h.jsx)(d.a,{store:se,children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(g,{}),Object(h.jsxs)(f.c,{children:[Object(h.jsx)(f.a,{path:"/favorites",component:te}),Object(h.jsx)(f.a,{path:"/",component:Q,exact:!0})]})]})})};u.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(l.a,{children:Object(h.jsx)(ue,{})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.6f6a5308.chunk.js.map